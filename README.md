# üîê –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –û—Ç–ª–∏—á–∏–µ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ö–ª—é—á–µ–≤—ã–º –æ—Ç–ª–∏—á–∏–µ–º –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–º–µ–Ω–∞ JWS –Ω–∞ JWE.
–Ø –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ–ª –∑–∞–ø–∏—Å—å –≤–æ—Ä–∫—à–æ–ø–∞, –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 54 –º–∏–Ω—É—Ç–µ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ —Ç–æ–∫–µ–Ω JWE –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
–ü—Ä–∏ —ç—Ç–æ–º –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞, —Ç–∞–∫ –∫–∞–∫ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å –ø–æ–º–æ—â—å—é –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ JWE —è –ø—Ä–∏–º–µ–Ω–∏–ª –±–∏–±–ª–∏–æ—Ç–µ–∫—É com.nimbusds:nimbus-jose-jwt —Å –≥–∏—Ç—Ö–∞–±–∞ –∏ –ø–µ—Ä–µ–ø–∏—Å–∞–ª JwtService

## –ó–∞–ø—É—Å–∫

–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç –∏–∑ –≤–µ—Ç–∫–∏ main (4 –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ), —Ç–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä myapp_container –∏–∑ docker'a
 ``` docker rm myapp_container ```

–ó–∞—Ç–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
 ``` docker compose up ```

### !–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –¥–æ–ª–≥–æ! —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Postgres –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏


## üìÑ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

---

### üî∏ POST `/auth/register`

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### Request
role (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ADMIN, PREMIUM_USER, GUEST (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî GUEST)
```json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "securepassword",
  "role": "PREMIUM_USER"
}

```
### üî∏ POST /auth/login
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.

```json
{
  "username": "testuser",
  "password": "securepassword"
}
```

### üî∏ POST /auth/refresh-token
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access-—Ç–æ–∫–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é refresh-—Ç–æ–∫–µ–Ω–∞.

```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### üî∏ POST /auth/logout
–û—Ç–∑—ã–≤ (–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è) refresh-—Ç–æ–∫–µ–Ω–∞. –¢—Ä–µ–±—É–µ—Ç Authorization –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å Bearer accessToken.

Authorization: Bearer ACCESS_TOKEN 

### üî∏ GET /premium/features
–î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—å—é PREMIUM_USER.


Authorization: Bearer ACCESS_TOKEN

### üî∏ GET /admin/dashboard
–î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å —Ä–æ–ª—å—é ADMIN.

Authorization: Bearer ACCESS_TOKEN

